<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Driver - Allin Platform</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="mobile-container">
    <header class="app-header">
      <div class="header-row">
        <div class="header-logo-block">
          <span class="logo">allin</span>
          <span class="header-address">Book a Driver</span>
        </div>
        <button class="menu-btn"><i class="fa-solid fa-bars"></i></button>
      </div>
    </header>
    <main id="main-content">
      <section class="booking-section">
        <div class="booking-service-info">
          <div class="booking-service-icon"><i class="fa-solid fa-user-tie"></i></div>
          <div>
            <div class="booking-service-name">Driver</div>
            <div class="booking-service-price">‚Çπ15/km | ‚Çπ200/hr</div>
          </div>
        </div>
        <div class="booking-map">
          <div id="map" style="height: 200px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center; margin-bottom: 16px;">
            <div style="text-align: center; color: #666;">
              <i class="fa-solid fa-map-location-dot" style="font-size: 2rem; margin-bottom: 8px;"></i>
              <div>Interactive map will appear here</div>
              <div style="font-size: 0.8rem;">(Google Maps integration)</div>
            </div>
          </div>
        </div>
        <form class="booking-form">
          <label>Pickup Location
            <input type="text" placeholder="Enter pickup address" required />
          </label>
          <label>Drop Location
            <input type="text" placeholder="Enter drop address" required />
          </label>
          <label>Date & Time
            <input type="datetime-local" required />
          </label>
          <label>Number of Passengers
            <input type="number" min="1" max="8" value="1" required />
          </label>
          <label>Special Instructions
            <input type="text" placeholder="Any special instructions?" />
          </label>
        </form>
        <div class="booking-estimate">
          <span>Estimated Price:</span> <span class="booking-price">‚Çπ250</span>
        </div>
        <button class="primary-btn" id="next-btn">Next</button>
        <div class="booking-summary" style="display:none;">
          <h3>Confirm Booking</h3>
          <div class="summary-details">
            <!-- Summary details will be shown here -->
          </div>
          <button class="primary-btn" id="confirm-btn">Confirm Booking</button>
        </div>
      </section>
    </main>
    <nav class="bottom-nav">
      <a class="nav-btn" href="profile.html"><span>Profile</span></a>
      <a class="nav-btn" href="allinternet.html"><span>Home</span></a>
      <a class="nav-btn" href="history.html"><span>History</span></a>
    </nav>
  </div>
  <script src="main.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <script>
    // Store booking data
    let bookingDetails = {};
    
    // Calculate estimate based on form inputs
    function calculateEstimate() {
      const pickup = document.querySelector('input[placeholder="Enter pickup address"]').value;
      const drop = document.querySelector('input[placeholder="Enter drop address"]').value;
      const passengers = document.querySelector('input[type="number"]').value;
      
      if (pickup && drop) {
        // Simple estimate calculation (dummy)
        const basePrice = 200;
        const distanceMultiplier = 1.5;
        const passengerMultiplier = passengers > 1 ? 1.2 : 1;
        const estimatedPrice = Math.round(basePrice * distanceMultiplier * passengerMultiplier);
        
        document.querySelector('.booking-price').textContent = `‚Çπ${estimatedPrice}`;
        return estimatedPrice;
      }
      return 250; // Default price
    }
    
    // Update estimate on input change
    document.querySelectorAll('.booking-form input').forEach(input => {
      input.addEventListener('input', calculateEstimate);
    });
    
    document.getElementById('next-btn').onclick = function() {
      // Collect form data
      const form = document.querySelector('.booking-form');
      const formData = new FormData(form);
      
      bookingDetails = {
        id: Date.now(),
        service: 'driver',
        serviceName: 'Driver Booking',
        pickup: formData.get('pickup') || document.querySelector('input[placeholder="Enter pickup address"]').value,
        drop: formData.get('drop') || document.querySelector('input[placeholder="Enter drop address"]').value,
        datetime: formData.get('datetime') || document.querySelector('input[type="datetime-local"]').value,
        passengers: formData.get('passengers') || document.querySelector('input[type="number"]').value,
        instructions: formData.get('instructions') || document.querySelector('input[placeholder="Any special instructions?"]').value,
        price: calculateEstimate(),
        date: new Date().toISOString(),
        status: 'pending'
      };
      
      // Show summary
      document.querySelector('.booking-form').style.display = 'none';
      document.querySelector('.booking-estimate').style.display = 'none';
      document.getElementById('next-btn').style.display = 'none';
      document.querySelector('.booking-summary').style.display = 'block';
      
      const summaryHTML = `
        <div style="background: #f8f9fa; padding: 16px; border-radius: 8px; margin-bottom: 16px;">
          <h4 style="margin: 0 0 12px 0; color: #222;">Booking Summary</h4>
          <div style="margin-bottom: 8px;"><strong>Pickup:</strong> ${bookingDetails.pickup}</div>
          <div style="margin-bottom: 8px;"><strong>Drop:</strong> ${bookingDetails.drop}</div>
          <div style="margin-bottom: 8px;"><strong>Date & Time:</strong> ${new Date(bookingDetails.datetime).toLocaleString()}</div>
          <div style="margin-bottom: 8px;"><strong>Passengers:</strong> ${bookingDetails.passengers}</div>
          ${bookingDetails.instructions ? `<div style="margin-bottom: 8px;"><strong>Instructions:</strong> ${bookingDetails.instructions}</div>` : ''}
          <div style="margin-top: 12px; padding-top: 12px; border-top: 1px solid #ddd;">
            <strong>Total Price: ‚Çπ${bookingDetails.price}</strong>
          </div>
        </div>
      `;
      
      document.querySelector('.summary-details').innerHTML = summaryHTML;
    };
    
    document.getElementById('confirm-btn').onclick = function() {
      // Store booking in localStorage
      let bookings = JSON.parse(localStorage.getItem('bookings') || '[]');
      bookings.push(bookingDetails);
      localStorage.setItem('bookings', JSON.stringify(bookings));
      
      alert('Booking Confirmed! You will be redirected to history page.');
      setTimeout(() => {
        window.location.href = 'history.html';
      }, 1000);
    };
    
    // Demo map functionality
    function initMap() {
      const mapElement = document.getElementById('map');
      if (mapElement) {
        // In a real app, this would initialize Google Maps
        // For demo purposes, we'll show a placeholder
        mapElement.innerHTML = `
          <div style="text-align: center; color: #666; padding: 20px;">
            <i class="fa-solid fa-map-location-dot" style="font-size: 2rem; margin-bottom: 8px; color: #1976d2;"></i>
            <div style="font-weight: 600; margin-bottom: 8px;">Interactive Map</div>
            <div style="font-size: 0.9rem; margin-bottom: 12px;">Google Maps integration</div>
            <div style="background: #f0f0f0; border-radius: 4px; padding: 8px; font-size: 0.8rem;">
              <div>üìç Current Location: Delhi, India</div>
              <div>üöó Available drivers: 8 nearby</div>
              <div>‚è±Ô∏è Estimated arrival: 5-10 minutes</div>
            </div>
          </div>
        `;
      }
    }
    
    // Initialize map when page loads
    document.addEventListener('DOMContentLoaded', function() {
      setTimeout(initMap, 500);
    });
  </script>
</body>
</html> 